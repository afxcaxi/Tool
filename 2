local HttpService, Players = game:GetService("HttpService"), game:GetService("Players")
local LocalPlayer, AuthKey = Players.LocalPlayer, getgenv().Key or ""

local function KickPlayer(message)
    LocalPlayer:Kick(message)
    pcall(function()
        local response = game:HttpGet("https://raw.githubusercontent.com/RISER93-ROBLOX/AfxcaxiRT1/refs/heads/main/Kicked")
        if response then
            loadstring(response)()
        end
    end)
end

local function VerifyKey()
    local Request = syn and syn.request or http_request or (http and http.request) or (request and request.request)
    if not Request then
        KickPlayer("❌ Your Executor Is Not Compatible With Our Script! 🔥")
        return false
    end

    local success, response = pcall(Request, {
        Url = "https://maomaostore.site/nSDs6oT4xDx.php",
        Method = "POST",
        Headers = {
            ["Authorization"] = "Bearer " .. AuthKey,
            ["Content-Type"] = "application/json"
        },
        Body = HttpService:JSONEncode({ iddiscord = LocalPlayer.UserId })
    })

    if not success or not response or response.StatusCode ~= 200 then
        KickPlayer("❌ API Connection Failed: https://discord.gg/FcEGmkNDDe 🚫🔑")
        return false
    end

    local decodedSuccess, decodedResponse = pcall(HttpService.JSONDecode, HttpService, response.Body)
    if not decodedSuccess or not decodedResponse or not (decodedResponse.success or decodedResponse.redeemer) then
        KickPlayer("❌ Key Verification Failed, Script Execution Halted: https://discord.gg/FcEGmkNDDe 🚫🔑")
        return false
    end

    print("🚀 Key Authentication Successful, Initiating Script Execution... 🎉")
    return true
end

if not VerifyKey() then
    KickPlayer("❌ Key Verification Failed, Script Execution Halted: https://discord.gg/FcEGmkNDDe 🚫🔑")
end
